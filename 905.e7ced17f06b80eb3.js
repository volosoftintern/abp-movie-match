"use strict";(self.webpackChunkMovieMatch=self.webpackChunkMovieMatch||[]).push([[905],{905:(I,l,s)=>{s.r(l),s.d(l,{HomeModule:()=>b});var a=s(8609),d=s(2537),f=s(1765),h=s(3951),t=s(6435);let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[a.IR2,f.e2,d.XC,h.h2],a.IR2,f.e2,d.XC,h.h2]}),e})();var m=s(1771),M=s(6114);let P=(()=>{class e{constructor(o){this.restService=o,this.apiName="Default",this.getFeed=n=>this.restService.request({method:"GET",url:"/api/app/post/feed",params:{userId:n.userId,maxCount:n.maxCount,skipCount:n.skipCount}},{apiName:this.apiName})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(a.vgb))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=s(9808),x=s(2340);let T=(()=>{class e{transform(o){return this.getTimeDiffer(o)}getTimeDiffer(o){const n=new Date(o),r=(new Date).getTime()-n.getTime(),p=36e5,u=24*p;return r<p?`${Math.floor(r/6e4)}m`:r<u?`${Math.floor(r/p)}h`:r<2592e6?`${Math.floor(r/u)}d`:n.toLocaleDateString()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"timeDiffer",type:e,pure:!0}),e})();const Z=function(e){return["/","Movies",e]};let O=(()=>{class e{constructor(){this.imgPath=x.h}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-post"]],inputs:{post:"post"},decls:24,vars:13,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"text-muted","px-1"],[1,"px-1"],[1,"card-subtitle","text-muted","mb-1"],[3,"routerLink"],[1,"row","mb-1"],[1,"col-2"],[1,"card-img-top",3,"src","alt"],[1,"col-7"],[1,"card-text","movie-comment"],[1,"card-text"],[1,"fas","fa-star"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.TgZ(4,"span",3),t._uU(5),t.qZA(),t.TgZ(6,"span",4),t._uU(7,"\u26ac"),t.qZA(),t.TgZ(8,"span",3),t._uU(9),t.ALo(10,"timeDiffer"),t.qZA()(),t.TgZ(11,"h6",5),t._uU(12),t.qZA(),t.TgZ(13,"a",6)(14,"div",7)(15,"div",8),t._UZ(16,"img",9),t.qZA(),t.TgZ(17,"div",10)(18,"p",11),t._uU(19),t.qZA()(),t.TgZ(20,"div",8)(21,"p",12),t._UZ(22,"i",13),t._uU(23),t.qZA()()()()()()),2&o&&(t.xp6(3),t.Oqu(n.post.user.name),t.xp6(2),t.hij("@",n.post.user.userName,""),t.xp6(4),t.Oqu(t.lcZ(10,9,n.post.creationTime)),t.xp6(3),t.Oqu(n.post.movie.title),t.xp6(1),t.Q6J("routerLink",t.VKq(11,Z,n.post.movie.id)),t.xp6(3),t.Q6J("src",n.imgPath+n.post.movie.posterPath,t.LSH)("alt",n.post.movie.title),t.xp6(3),t.Oqu(n.post.comment),t.xp6(4),t.hij(" ",n.post.rate,""))},directives:[m.yS],pipes:[T],styles:["h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}.fa-star[_ngcontent-%COMP%]{color:#ffd600}.card[_ngcontent-%COMP%]{width:30rem}.card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:50px}.card-text.movie-comment[_ngcontent-%COMP%]{text-align:left}p[_ngcontent-%COMP%]{font-size:1.2rem}@media only screen and (max-width: 600px){p[_ngcontent-%COMP%]{font-size:1rem}.card[_ngcontent-%COMP%]{width:23rem}}"]}),e})();function S(e,i){1&e&&t._UZ(0,"app-post",7),2&e&&t.Q6J("post",i.$implicit)}function y(e,i){1&e&&(t.TgZ(0,"div",8)(1,"span",9),t._uU(2,"Loading..."),t.qZA()())}function H(e,i){1&e&&(t.TgZ(0,"h2",10),t._uU(1," No Post Data "),t.qZA())}function A(e,i){1&e&&(t.TgZ(0,"button",11),t._uU(1," No More Data "),t.qZA())}const D=[{path:"",component:(()=>{class e{constructor(o,n,c,r){this.oAuthService=o,this.authService=n,this.postService=c,this.configStateService=r,this.maxCount=5,this.skipCount=0,this.isLoading=!1,this.noData=!1,this.noMoreData=!1,this.post={items:[],totalCount:0}}onScroll(o){this.noMoreData||this.isLoading||document.documentElement.scrollTop+window.innerHeight>=document.documentElement.offsetHeight&&this.loadPosts(this.currentUser)}get hasLoggedIn(){return this.oAuthService.hasValidAccessToken()}ngOnInit(){this.currentUser=this.configStateService.getOne("currentUser"),this.loadPosts(this.currentUser)}login(){this.authService.navigateToLogin()}loadPosts(o){this.isLoading=!0,this.postService.getFeed({userId:o.id,maxCount:this.maxCount,skipCount:this.skipCount}).subscribe(n=>{this.post.items.push(...n.items),this.post.totalCount=n.totalCount,this.skipCount+=n.items.length,0==n.totalCount?this.noData=!0:n.items.length<this.maxCount&&(this.noMoreData=!0),this.isLoading=!1})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(M.Ct),t.Y36(a.e80),t.Y36(P),t.Y36(a.XJE))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],hostBindings:function(o,n){1&o&&t.NdJ("scroll",function(r){return n.onScroll(r)},!1,t.Jf7)},decls:7,vars:4,consts:[[1,"container","d-flex","align-items-center","flex-column","mb-3"],[1,"d-flex","flex-column","align-items-center","my-3","post-container"],["postList",""],[3,"post",4,"ngFor","ngForOf"],["class","spinner-border loader","role","status",4,"ngIf"],["class","no-post-data",4,"ngIf"],["disabled","","class","btn btn-secondary btn-load-more",4,"ngIf"],[3,"post"],["role","status",1,"spinner-border","loader"],[1,"sr-only"],[1,"no-post-data"],["disabled","",1,"btn","btn-secondary","btn-load-more"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1,2),t.YNc(3,S,1,1,"app-post",3),t.qZA(),t.YNc(4,y,3,0,"div",4),t.YNc(5,H,2,0,"h2",5),t.YNc(6,A,2,0,"button",6),t.qZA()),2&o&&(t.xp6(3),t.Q6J("ngForOf",n.post.items),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",n.noData),t.xp6(1),t.Q6J("ngIf",n.noMoreData))},directives:[g.sg,O,g.O5],styles:["h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{margin-top:150px}@media only screen and (max-width: 600px){h1[_ngcontent-%COMP%]{font-size:14px}}.post-container[_ngcontent-%COMP%]{row-gap:10px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(D)],m.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v,U]]}),e})()}}]);