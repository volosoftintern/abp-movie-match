"use strict";(self.webpackChunkMovieMatch=self.webpackChunkMovieMatch||[]).push([[152],{1152:(we,J,l)=>{l.r(J),l.d(J,{ACCOUNT_CONFIG_OPTIONS:()=>Z,AccountModule:()=>Ze,AuthenticationFlowGuard:()=>_,ChangePasswordComponent:()=>x,ForgotPasswordComponent:()=>T,LoginComponent:()=>L,ManageProfileComponent:()=>N,ManageProfileStateService:()=>w,PersonalSettingsComponent:()=>q,RegisterComponent:()=>O,ResetPasswordComponent:()=>M});var s=l(8609),c=l(1765),e=l(6435),K=l(2537),p=l(3951),f=l(1771),r=l(4182),h=l(537),F=l(7221),B=l(7545),A=(()=>{return(o=A||(A={}))[o.Success=1]="Success",o[o.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",o[o.NotAllowed=3]="NotAllowed",o[o.LockedOut=4]="LockedOut",o[o.RequiresTwoFactor=5]="RequiresTwoFactor",A;var o})();(0,s.Uoq)(A);let P=(()=>{class o{constructor(t){this.restService=t,this.apiName="AbpAccount",this.register=n=>this.restService.request({method:"POST",url:"/api/account/register",body:n},{apiName:this.apiName}),this.resetPassword=n=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:n},{apiName:this.apiName}),this.sendPasswordResetCode=n=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:n},{apiName:this.apiName})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(s.vgb))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),C=(()=>{class o{constructor(t){this.restService=t,this.apiName="AbpAccount",this.changePassword=n=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:n},{apiName:this.apiName}),this.get=()=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName}),this.update=n=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:n},{apiName:this.apiName})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(s.vgb))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var g=l(9808),Y=l(1737),y=l(1777);function oe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"abp-button",6),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e.TgZ(14,"a",7),e._UZ(15,"i",8),e._uU(16),e.ALo(17,"abpLocalization"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(e.lcZ(3,7,"AbpAccount::SendPasswordResetLink_Information")),e.xp6(4),e.Oqu(e.lcZ(7,9,"AbpAccount::EmailAddress")),e.xp6(5),e.Q6J("loading",t.inProgress)("disabled",null==t.form?null:t.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(13,11,"AbpAccount::Submit")," "),e.xp6(4),e.Oqu(e.lcZ(17,13,"AbpAccount::Login"))}}function te(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",7)(4,"button",9),e._UZ(5,"i",8),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"AbpAccount::BackToLogin")," "))}function ne(o,i){1&o&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"abpLocalization"),e.TgZ(3,"a",15),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::AreYouANewUser")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpAccount::Register")))}function re(o,i){1&o&&(e.TgZ(0,"div",2)(1,"label",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"span"),e._uU(5," * "),e.qZA(),e._UZ(6,"input",9),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function ie(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"label",3),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA(),e.TgZ(5,"span"),e._uU(6," * "),e.qZA(),e.TgZ(7,"input",4),e.NdJ("keydown.space",function(a){return a.preventDefault()}),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",2)(11,"label",7),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e._UZ(14,"input",8),e.qZA()(),e.TgZ(15,"div",6)(16,"div",2)(17,"label",9),e._uU(18),e.ALo(19,"abpLocalization"),e.qZA(),e._UZ(20,"input",10),e.qZA()()(),e.TgZ(21,"div",2)(22,"label",11),e._uU(23),e.ALo(24,"abpLocalization"),e.qZA(),e.TgZ(25,"span"),e._uU(26," * "),e.qZA(),e._UZ(27,"input",12),e.qZA(),e.TgZ(28,"div",2)(29,"label",13),e._uU(30),e.ALo(31,"abpLocalization"),e.qZA(),e._UZ(32,"input",14),e.qZA(),e.TgZ(33,"abp-button",15),e._uU(34),e.ALo(35,"abpLocalization"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(3),e.Oqu(e.lcZ(4,9,"AbpIdentity::DisplayName:UserName")),e.xp6(9),e.Oqu(e.lcZ(13,11,"AbpIdentity::DisplayName:Name")),e.xp6(6),e.Oqu(e.lcZ(19,13,"AbpIdentity::DisplayName:Surname")),e.xp6(5),e.Oqu(e.lcZ(24,15,"AbpIdentity::DisplayName:Email")),e.xp6(7),e.Oqu(e.lcZ(31,17,"AbpIdentity::DisplayName:PhoneNumber")),e.xp6(3),e.Q6J("loading",t.inProgress)("disabled",null==t.form?null:t.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(35,19,"AbpIdentity::Save"),"")}}const k=function(o){return{active:o}};function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectedTab=0}),e.TgZ(1,"a",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,k,0===t.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(3,2,"AbpUi::ChangePassword"))}}function se(o,i){1&o&&e._UZ(0,"abp-change-password-form")}const E=function(o){return{componentKey:o}};function ce(o,i){if(1&o&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,se,1,0,"abp-change-password-form",15),e.qZA()()),2&o){const t=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::ChangePassword")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,E,t.changePasswordKey))}}function le(o,i){1&o&&e._UZ(0,"abp-personal-settings-form")}function pe(o,i){if(1&o&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,le,1,0,"abp-personal-settings-form",15),e.qZA()()),2&o){const t=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::PersonalSettings")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,E,t.personalSettingsKey))}}function ue(o,i){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,ce,7,7,"div",12),e.YNc(2,pe,7,7,"div",12),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0===t.selectedTab),e.xp6(1),e.Q6J("ngIf",1===t.selectedTab)}}function me(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"div",3)(2,"label",4),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA(),e.TgZ(5,"span"),e._uU(6," * "),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"div",3)(9,"label",6),e._uU(10),e.ALo(11,"abpLocalization"),e.qZA(),e.TgZ(12,"span"),e._uU(13," * "),e.qZA(),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"div",3)(16,"label",8),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA(),e.TgZ(19,"span"),e._uU(20," * "),e.qZA(),e._UZ(21,"input",9),e.qZA(),e.TgZ(22,"abp-button",10),e._uU(23),e.ALo(24,"abpLocalization"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(3),e.Oqu(e.lcZ(4,6,"AbpAccount::UserName")),e.xp6(7),e.Oqu(e.lcZ(11,8,"AbpAccount::EmailAddress")),e.xp6(7),e.Oqu(e.lcZ(18,10,"AbpAccount::Password")),e.xp6(5),e.Q6J("loading",t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(24,12,"AbpAccount::Register")," ")}}function de(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",3)(12,"label",6),e._uU(13),e.ALo(14,"abpLocalization"),e.qZA(),e.TgZ(15,"span"),e._uU(16," * "),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.TgZ(18,"button",8),e._uU(19),e.ALo(20,"abpLocalization"),e.qZA(),e.TgZ(21,"abp-button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(22),e.ALo(23,"abpLocalization"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form)("mapErrorsFn",t.mapErrorsFn),e.xp6(2),e.Oqu(e.lcZ(3,8,"AbpAccount::ResetPassword_Information")),e.xp6(4),e.Oqu(e.lcZ(7,10,"AbpAccount::Password")),e.xp6(7),e.Oqu(e.lcZ(14,12,"AbpAccount::ConfirmPassword")),e.xp6(6),e.hij(" ",e.lcZ(20,14,"AbpAccount::Cancel")," "),e.xp6(2),e.Q6J("loading",t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(23,16,"AbpAccount::Submit")," ")}}function fe(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",10)(4,"button",11),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),e.xp6(4),e.hij(" ",e.lcZ(6,4,"AbpAccount::BackToLogin")," "))}let T=(()=>{class o{constructor(t,n){this.fb=t,this.accountService=n,this.isEmailSent=!1,this.form=this.fb.group({email:["",[r.kI.required,r.kI.email]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email").value,appName:"Angular"}).pipe((0,h.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-forgot-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["emailSentTemplate",""],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["buttonClass","mt-2 mb-3 btn btn-primary btn-block","buttonType","submit",1,"d-block",3,"loading","disabled"],["routerLink","/account/login"],[1,"fa","fa-long-arrow-left","me-1"],[1,"d-block","mt-2","mb-3","btn","btn-primary","btn-block"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,oe,18,15,"form",0),e.YNc(4,te,8,6,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("ngIf",!n.isEmailSent)("ngIfElse",a)}},directives:[c.r0,g.O5,r._Y,r.JL,s.YzZ,r.sg,p.hL,r.Fj,r.JJ,r.u,p.J5,f.yS],pipes:[s.fuE],encapsulation:2}),o})();const Z=new e.OlP("ACCOUNT_CONFIG_OPTIONS");function R(o){const i=o.get(f.gz),t=o.get(Z);return i.snapshot.queryParams.returnUrl||t.redirectUrl||"/"}const{maxLength:D,required:j}=r.kI;let L=(()=>{class o{constructor(t,n,a,u,m){this.injector=t,this.fb=n,this.toasterService=a,this.authService=u,this.configState=m,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()}buildForm(){this.form=this.fb.group({username:["",[j,D(255)]],password:["",[j,D(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const{username:t,password:n,rememberMe:a}=this.form.value,u=R(this.injector);this.authService.login({username:t,password:n,rememberMe:a,redirectUrl:u}).pipe((0,F.K)(m=>{var d,b;return this.toasterService.error((null===(d=m.error)||void 0===d?void 0:d.error_description)||(null===(b=m.error)||void 0===b?void 0:b.error.message)||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,Y._)(m)}),(0,h.x)(()=>this.inProgress=!1)).subscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(r.qu),e.Y36(c.MJ),e.Y36(s.e80),e.Y36(s.XJE))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-login"]],decls:29,vars:21,consts:[[4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","login-input-user-name-or-email-address",1,"form-label"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password",1,"form-label"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],[1,"row"],[1,"col"],[1,"form-check"],["for","login-input-remember-me",1,"form-check-label","mb-2"],["type","checkbox","id","login-input-remember-me","formControlName","rememberMe",1,"form-check-input"],[1,"text-end","col"],["routerLink","/account/forgot-password"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(t,n){1&t&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,ne,6,6,"strong",0),e.TgZ(4,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(5,"div",2)(6,"label",3),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2)(11,"label",5),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",9)(18,"label",10),e._UZ(19,"input",11),e._uU(20),e.ALo(21,"abpLocalization"),e.qZA()()(),e.TgZ(22,"div",12)(23,"a",13),e._uU(24),e.ALo(25,"abpLocalization"),e.qZA()()(),e.TgZ(26,"abp-button",14),e._uU(27),e.ALo(28,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,9,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",n.isSelfRegistrationEnabled),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(3),e.Oqu(e.lcZ(8,11,"AbpAccount::UserNameOrEmailAddress")),e.xp6(5),e.Oqu(e.lcZ(13,13,"AbpAccount::Password")),e.xp6(8),e.hij(" ",e.lcZ(21,15,"AbpAccount::RememberMe")," "),e.xp6(4),e.Oqu(e.lcZ(25,17,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("loading",n.inProgress),e.xp6(1),e.hij(" ",e.lcZ(28,19,"AbpAccount::Login")," "))},directives:[c.r0,g.O5,f.yS,r._Y,r.JL,s.YzZ,r.sg,p.hL,r.Fj,r.JJ,r.u,p.J5,s.Uqp,r.Wl],pipes:[s.fuE],encapsulation:2}),o})(),w=(()=>{class o{constructor(){this.store=new s.gSB({})}get createOnUpdateStream(){return this.store.sliceUpdate}getProfile$(){return this.store.sliceState(t=>t.profile)}getProfile(){return this.store.state.profile}setProfile(t){this.store.patch({profile:t})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const{required:S}=r.kI,G=["newPassword","repeatNewPassword"];let x=(()=>{class o{constructor(t,n,a,u,m){this.fb=t,this.injector=n,this.toasterService=a,this.profileService=u,this.manageProfileState=m,this.mapErrorsFn=(d,b,I)=>G.indexOf(String(I.name))<0?d:d.concat(b.filter(({key:z})=>"passwordMismatch"===z))}ngOnInit(){var t;this.hideCurrentPassword=!(null===(t=this.manageProfileState.getProfile())||void 0===t?void 0:t.hasPassword);const n=(0,c.dD)(this.injector);this.form=this.fb.group({password:["",S],newPassword:["",{validators:[S,...n]}],repeatNewPassword:["",{validators:[S,...n]}]},{validators:[(0,p.z)(G)]}),this.hideCurrentPassword&&this.form.removeControl("password")}onSubmit(){this.form.invalid||(this.inProgress=!0,this.profileService.changePassword(Object.assign(Object.assign({},!this.hideCurrentPassword&&{currentPassword:this.form.get("password").value}),{newPassword:this.form.get("newPassword").value})).pipe((0,h.x)(()=>this.inProgress=!1)).subscribe({next:()=>{this.form.reset(),this.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),this.hideCurrentPassword&&(this.hideCurrentPassword=!1,this.form.addControl("password",new r.NI("",[S])))},error:t=>{var n,a;this.toasterService.error((null===(a=null===(n=t.error)||void 0===n?void 0:n.error)||void 0===a?void 0:a.message)||"AbpAccount::DefaultErrorMessage")}}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(e.zs3),e.Y36(c.MJ),e.Y36(C),e.Y36(w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],decls:19,vars:14,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],["class","mb-3 form-group",4,"ngIf"],[1,"mb-3","form-group"],["for","new-password",1,"form-label"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password",1,"form-label"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password",1,"form-label"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.YNc(1,re,7,3,"div",1),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA(),e.TgZ(6,"span"),e._uU(7," * "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA(),e.TgZ(13,"span"),e._uU(14," * "),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"abp-button",7),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA()()),2&t&&(e.Q6J("formGroup",n.form)("mapErrorsFn",n.mapErrorsFn),e.xp6(1),e.Q6J("ngIf",!n.hideCurrentPassword),e.xp6(3),e.Oqu(e.lcZ(5,8,"AbpIdentity::DisplayName:NewPassword")),e.xp6(7),e.Oqu(e.lcZ(12,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.xp6(5),e.Q6J("loading",n.inProgress)("disabled",null==n.form?null:n.form.invalid),e.xp6(1),e.Oqu(e.lcZ(18,12,"AbpIdentity::Save")))},directives:[c.r0,r._Y,r.JL,s.YzZ,r.sg,p.hL,g.O5,r.Fj,r.JJ,r.u,p.J5,s.Uqp],pipes:[s.fuE],encapsulation:2}),o})();const{maxLength:v,required:Q,email:ge}=r.kI;let q=(()=>{class o{constructor(t,n,a,u){this.fb=t,this.toasterService=n,this.profileService=a,this.manageProfileState=u}ngOnInit(){this.buildForm()}buildForm(){const t=this.manageProfileState.getProfile();this.form=this.fb.group({userName:[t.userName,[Q,v(256)]],email:[t.email,[Q,ge,v(256)]],name:[t.name||"",[v(64)]],surname:[t.surname||"",[v(64)]],phoneNumber:[t.phoneNumber||"",[v(16)]]})}submit(){this.form.invalid||(this.inProgress=!0,this.profileService.update(this.form.value).pipe((0,h.x)(()=>this.inProgress=!1)).subscribe(t=>{this.manageProfileState.setProfile(t),this.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3})}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(c.MJ),e.Y36(C),e.Y36(w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],decls:1,vars:1,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","username",1,"form-label"],["type","text","id","username","formControlName","userName","autofocus","",1,"form-control",3,"keydown.space"],[1,"row"],[1,"col","col-md-6"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","surname",1,"form-label"],["type","text","id","surname","formControlName","surname",1,"form-control"],["for","email-address",1,"form-label"],["type","text","id","email-address","formControlName","email",1,"form-control"],["for","phone-number",1,"form-label"],["type","text","id","phone-number","formControlName","phoneNumber",1,"form-control"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading","disabled"]],template:function(t,n){1&t&&e.YNc(0,ie,36,21,"form",0),2&t&&e.Q6J("ngIf",n.form)},directives:[c.r0,g.O5,r._Y,r.JL,s.YzZ,r.sg,p.hL,r.Fj,r.JJ,r.u,p.J5,s.Uqp],pipes:[s.fuE],encapsulation:2}),o})(),N=(()=>{class o{constructor(t,n){this.profileService=t,this.manageProfileState=n,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent",this.profile$=this.manageProfileState.getProfile$()}ngOnInit(){this.profileService.get().subscribe(t=>{this.manageProfileState.setProfile(t),t.isExternal&&(this.hideChangePasswordTab=!0,this.selectedTab=1)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C),e.Y36(w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-manage-profile"]],decls:15,vars:15,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],["class","col-12 col-md-9",4,"ngIf"],[1,"nav-item",3,"click"],[1,"col-12","col-md-9"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(t,n){if(1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),e.YNc(7,ae,4,6,"li",6),e.ALo(8,"async"),e.TgZ(9,"li",7),e.NdJ("click",function(){return n.selectedTab=1}),e.TgZ(10,"a",8),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA()()()(),e.YNc(13,ue,3,2,"div",9),e.ALo(14,"async"),e.qZA()()()),2&t){let a;e.xp6(1),e.Q6J("abpLoading",!(null!=(a=e.lcZ(2,5,n.profile$))&&a.userName)),e.xp6(6),e.Q6J("ngIf",!n.hideChangePasswordTab&&e.lcZ(8,7,n.profile$)),e.xp6(3),e.Q6J("ngClass",e.VKq(13,k,1===n.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(12,9,"AbpAccount::PersonalSettings")),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,11,n.profile$))}},directives:[x,q,c.TH,g.O5,g.mk,s.zLP],pipes:[g.Ov,s.fuE],styles:[".min-h-400[_ngcontent-%COMP%]{min-height:400px}"],data:{animation:[(0,y.X$)("fadeIn",[(0,y.eR)(":enter",(0,y._7)(c.Ji))])]}}),o})();const{maxLength:be,required:U,email:he}=r.kI;let O=(()=>{class o{constructor(t,n,a,u,m,d){this.fb=t,this.accountService=n,this.configState=a,this.toasterService=u,this.authService=m,this.injector=d,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.isSelfRegistrationEnabled||this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},null,{life:1e4})}buildForm(){this.form=this.fb.group({username:["",[U,be(255)]],password:["",[U,...(0,c.dD)(this.injector)]],email:["",[U,he]]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const t={userName:this.form.get("username").value,password:this.form.get("password").value,emailAddress:this.form.get("email").value,appName:"Angular"};this.accountService.register(t).pipe((0,B.w)(()=>this.authService.login({username:t.userName,password:t.password,redirectUrl:R(this.injector)})),(0,F.K)(n=>{var a,u;return this.toasterService.error((null===(a=n.error)||void 0===a?void 0:a.error_description)||(null===(u=n.error)||void 0===u?void 0:u.error.message)||"AbpAccount::DefaultErrorMessage",null,{life:7e3}),(0,Y._)(n)}),(0,h.x)(()=>this.inProgress=!1)).subscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(P),e.Y36(s.XJE),e.Y36(c.MJ),e.Y36(s.e80),e.Y36(e.zs3))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-register"]],decls:10,vars:10,consts:[["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-user-name",1,"form-label"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(t,n){1&t&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"strong"),e._uU(4),e.ALo(5,"abpLocalization"),e.TgZ(6,"a",0),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA()(),e.YNc(9,me,25,14,"form",1)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"AbpAccount::Register")),e.xp6(3),e.hij(" ",e.lcZ(5,6,"AbpAccount::AlreadyRegistered")," "),e.xp6(3),e.Oqu(e.lcZ(8,8,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",n.isSelfRegistrationEnabled))},directives:[c.r0,f.yS,g.O5,r._Y,r.JL,s.YzZ,r.sg,p.hL,r.Fj,s.Uqp,r.JJ,r.u,p.J5],pipes:[s.fuE],encapsulation:2}),o})();const $=["password","confirmPassword"];let M=(()=>{class o{constructor(t,n,a,u,m){this.fb=t,this.accountService=n,this.route=a,this.router=u,this.injector=m,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(d,b,I)=>$.indexOf(String(I.name))<0?d:d.concat(b.filter(({key:z})=>"passwordMismatch"===z))}ngOnInit(){this.route.queryParams.subscribe(({userId:t,resetToken:n})=>{(!t||!n)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[t,[r.kI.required]],resetToken:[n,[r.kI.required]],password:["",[r.kI.required,...(0,c.dD)(this.injector)]],confirmPassword:["",[r.kI.required,...(0,c.dD)(this.injector)]]},{validators:[(0,p.z)($)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId").value,resetToken:this.form.get("resetToken").value,password:this.form.get("password").value}).pipe((0,h.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(P),e.Y36(f.gz),e.Y36(f.F0),e.Y36(e.zs3))},o.\u0275cmp=e.Xpm({type:o,selectors:[["abp-reset-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit",4,"ngIf","ngIfElse"],["passwordResetTemplate",""],["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],[1,"mb-3","form-group"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button","routerLink","/account/login",1,"me-2","btn","btn-secondary"],["buttonType","submit","buttonClass","me-2 btn btn-primary",3,"loading","click"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,de,24,18,"form",0),e.YNc(4,fe,7,6,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ResetPassword")),e.xp6(2),e.Q6J("ngIf",!n.isPasswordReset)("ngIfElse",a)}},directives:[c.r0,g.O5,r._Y,r.JL,s.YzZ,r.sg,p.hL,r.Fj,r.JJ,r.u,p.J5,f.rH,f.yS],pipes:[s.fuE],encapsulation:2}),o})(),_=(()=>{class o{constructor(t){this.authService=t}canActivate(){return!!this.authService.isInternalAuth||(this.authService.navigateToLogin(),!1)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(s.e80))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Ae=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:s.O39,children:[{path:"login",component:s.c$y,canActivate:[_],data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:L}}},{path:"register",component:s.c$y,canActivate:[_],data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:O}}},{path:"forgot-password",component:s.c$y,canActivate:[_],data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:T}}},{path:"reset-password",component:s.c$y,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:M}}},{path:"manage",component:s.c$y,canActivate:[s.a1M],data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:N}}}]}];let ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(Ae)],f.Bz]}),o})();function _e(o){return Object.assign({redirectUrl:"/"},o)}let Ze=(()=>{class o{static forChild(t={}){return{ngModule:o,providers:[_,{provide:Z,useValue:t},{provide:"ACCOUNT_OPTIONS",useFactory:_e,deps:[Z]}]}}static forLazy(t={}){return new s.Cgl(o.forChild(t))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.IR2,ve,c.e2,K.XC,p.h2]]}),o})()}}]);